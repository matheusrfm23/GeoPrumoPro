{"ast":null,"code":"// geoprumo/frontend/src/components/ManualAdd/ManualAdd.jsx\nimport React,{useState,useEffect,useCallback}from'react';import{autocompleteAddress}from'../../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ManualAdd(_ref){let{onAddPoint,isLoading}=_ref;const[inputValue,setInputValue]=useState('');const[suggestions,setSuggestions]=useState([]);// Função para buscar sugestões (com debounce)\nconst fetchSuggestions=useCallback(query=>{autocompleteAddress(query).then(setSuggestions);},[]);// Efeito para chamar a busca após o usuário parar de digitar\nuseEffect(()=>{if(inputValue.length<3){setSuggestions([]);return;}// Debounce: espera 300ms antes de chamar a API\nconst handler=setTimeout(()=>{fetchSuggestions(inputValue);},300);// Limpa o timeout se o usuário continuar digitando\nreturn()=>clearTimeout(handler);},[inputValue,fetchSuggestions]);const handleAddClick=()=>{if(inputValue.trim()){onAddPoint(inputValue);setInputValue('');setSuggestions([]);}};const handleSuggestionClick=suggestion=>{setInputValue(suggestion);setSuggestions([]);};return/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 relative\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"manual-add-input\",className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Adicionar Ponto por Endere\\xE7o, CEP ou Coordenadas\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"manual-add-input\",value:inputValue,onChange:e=>setInputValue(e.target.value),placeholder:\"Ex: 30130-010 ou Pra\\xE7a Sete, BH\",className:\"flex-grow p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500\",disabled:isLoading,autoComplete:\"off\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddClick,disabled:isLoading||!inputValue.trim(),className:\"bg-indigo-600 text-white font-semibold py-2 px-4 rounded-md hover:bg-indigo-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed\",children:isLoading?'...':'Adicionar'})]}),suggestions.length>0&&/*#__PURE__*/_jsx(\"ul\",{className:\"absolute z-10 w-full bg-white border border-gray-300 rounded-md mt-1 shadow-lg max-h-48 overflow-y-auto\",children:suggestions.map((s,i)=>/*#__PURE__*/_jsx(\"li\",{onClick:()=>handleSuggestionClick(s),className:\"p-2 hover:bg-gray-100 cursor-pointer text-sm\",children:s},i))})]});}export default ManualAdd;","map":{"version":3,"names":["React","useState","useEffect","useCallback","autocompleteAddress","jsx","_jsx","jsxs","_jsxs","ManualAdd","_ref","onAddPoint","isLoading","inputValue","setInputValue","suggestions","setSuggestions","fetchSuggestions","query","then","length","handler","setTimeout","clearTimeout","handleAddClick","trim","handleSuggestionClick","suggestion","className","children","htmlFor","type","id","value","onChange","e","target","placeholder","disabled","autoComplete","onClick","map","s","i"],"sources":["C:/Users/mathe/Desktop/GeoPrumoPro/frontend/src/components/ManualAdd/ManualAdd.jsx"],"sourcesContent":["// geoprumo/frontend/src/components/ManualAdd/ManualAdd.jsx\r\n\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { autocompleteAddress } from '../../services/api';\r\n\r\nfunction ManualAdd({ onAddPoint, isLoading }) {\r\n  const [inputValue, setInputValue] = useState('');\r\n  const [suggestions, setSuggestions] = useState([]);\r\n\r\n  // Função para buscar sugestões (com debounce)\r\n  const fetchSuggestions = useCallback((query) => {\r\n    autocompleteAddress(query).then(setSuggestions);\r\n  }, []);\r\n\r\n  // Efeito para chamar a busca após o usuário parar de digitar\r\n  useEffect(() => {\r\n    if (inputValue.length < 3) {\r\n      setSuggestions([]);\r\n      return;\r\n    }\r\n    // Debounce: espera 300ms antes de chamar a API\r\n    const handler = setTimeout(() => {\r\n      fetchSuggestions(inputValue);\r\n    }, 300);\r\n    // Limpa o timeout se o usuário continuar digitando\r\n    return () => clearTimeout(handler);\r\n  }, [inputValue, fetchSuggestions]);\r\n\r\n  const handleAddClick = () => {\r\n    if (inputValue.trim()) {\r\n      onAddPoint(inputValue);\r\n      setInputValue('');\r\n      setSuggestions([]);\r\n    }\r\n  };\r\n\r\n  const handleSuggestionClick = (suggestion) => {\r\n    setInputValue(suggestion);\r\n    setSuggestions([]);\r\n  };\r\n\r\n  return (\r\n    <div className=\"mt-4 relative\">\r\n      <label htmlFor=\"manual-add-input\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n        Adicionar Ponto por Endereço, CEP ou Coordenadas\r\n      </label>\r\n      <div className=\"flex space-x-2\">\r\n        <input\r\n          type=\"text\"\r\n          id=\"manual-add-input\"\r\n          value={inputValue}\r\n          onChange={(e) => setInputValue(e.target.value)}\r\n          placeholder=\"Ex: 30130-010 ou Praça Sete, BH\"\r\n          className=\"flex-grow p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500\"\r\n          disabled={isLoading}\r\n          autoComplete=\"off\"\r\n        />\r\n        <button\r\n          onClick={handleAddClick}\r\n          disabled={isLoading || !inputValue.trim()}\r\n          className=\"bg-indigo-600 text-white font-semibold py-2 px-4 rounded-md hover:bg-indigo-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed\"\r\n        >\r\n          {isLoading ? '...' : 'Adicionar'}\r\n        </button>\r\n      </div>\r\n      \r\n      {/* Lista de Sugestões */}\r\n      {suggestions.length > 0 && (\r\n        <ul className=\"absolute z-10 w-full bg-white border border-gray-300 rounded-md mt-1 shadow-lg max-h-48 overflow-y-auto\">\r\n          {suggestions.map((s, i) => (\r\n            <li\r\n              key={i}\r\n              onClick={() => handleSuggestionClick(s)}\r\n              className=\"p-2 hover:bg-gray-100 cursor-pointer text-sm\"\r\n            >\r\n              {s}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ManualAdd;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}