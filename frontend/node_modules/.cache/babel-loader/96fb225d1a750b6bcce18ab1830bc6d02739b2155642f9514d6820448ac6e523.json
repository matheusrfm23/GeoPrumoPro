{"ast":null,"code":"// geoprumo/frontend/src/components/Upload/Uploader.jsx\nimport React,{useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Uploader(_ref){let{onProcess,isLoading}=_ref;const[activeTab,setActiveTab]=useState('files');const[currentFiles,setCurrentFiles]=useState([]);const[links,setLinks]=useState('');const[rawText,setRawText]=useState('');const handleFileChange=event=>{const newFiles=Array.from(event.target.files);// CORREÇÃO: Adiciona os novos arquivos à lista existente, em vez de substituir.\nsetCurrentFiles(prevFiles=>[...prevFiles,...newFiles]);};const handleSubmit=()=>{const payload={files:currentFiles,links:links.split('\\n').filter(link=>link.trim()!==''),texts:[rawText].filter(text=>text.trim()!=='')};onProcess(payload);// Limpa os campos para a próxima adição\nsetCurrentFiles([]);setLinks('');setRawText('');};const renderTabContent=()=>{switch(activeTab){case'files':return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"file-upload\",className:\"flex justify-center w-full h-32 px-4 transition bg-white border-2 border-gray-300 border-dashed rounded-md appearance-none cursor-pointer hover:border-gray-400 focus:outline-none\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"w-6 h-6 text-gray-600\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",strokeWidth:\"2\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",d:\"M7 16a4 4 0 01-4-4V6a4 4 0 014-4h1.586a1 1 0 01.707.293l1.414 1.414a1 1 0 00.707.293H12a4 4 0 014 4v1.586a1 1 0 00.293.707l1.414 1.414a1 1 0 01.293.707V16a4 4 0 01-4 4H7z\"})}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium text-gray-600\",children:[\"Arraste arquivos ou \",/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-600 underline\",children:\"procure\"})]})]}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"file-upload\",name:\"file-upload\",multiple:true,className:\"hidden\",onChange:handleFileChange})]}),currentFiles.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 text-sm text-gray-500\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold\",children:\"Arquivos selecionados:\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentFiles([]),className:\"text-xs text-red-500 hover:underline\",children:\"Limpar sele\\xE7\\xE3o\"})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"list-disc pl-5 mt-1\",children:currentFiles.map((f,i)=>/*#__PURE__*/_jsx(\"li\",{children:f.name},\"\".concat(f.name,\"-\").concat(i)))})]})]});case'links':return/*#__PURE__*/_jsx(\"textarea\",{className:\"w-full h-32 p-2 border rounded\",placeholder:\"Cole um ou mais links, um por linha...\",value:links,onChange:e=>setLinks(e.target.value)});case'text':return/*#__PURE__*/_jsx(\"textarea\",{className:\"w-full h-32 p-2 border rounded\",placeholder:\"Cole os dados da sua planilha aqui (formato CSV)...\",value:rawText,onChange:e=>setRawText(e.target.value)});default:return null;}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"border-b border-gray-200 mb-4\",children:/*#__PURE__*/_jsxs(\"nav\",{className:\"-mb-px flex space-x-4\",\"aria-label\":\"Tabs\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('files'),className:\"\".concat(activeTab==='files'?'border-blue-500 text-blue-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300',\" whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm\"),children:\"Arquivos\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('links'),className:\"\".concat(activeTab==='links'?'border-blue-500 text-blue-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300',\" whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm\"),children:\"Links\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('text'),className:\"\".concat(activeTab==='text'?'border-blue-500 text-blue-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300',\" whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm\"),children:\"Colar Texto\"})]})}),renderTabContent(),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,disabled:isLoading||currentFiles.length===0&&links.trim()===''&&rawText.trim()==='',className:\"mt-4 w-full bg-green-600 text-white font-bold py-2 px-4 rounded hover:bg-green-700 disabled:bg-gray-400 flex items-center justify-center\",children:isLoading?'Aguarde...':'Adicionar à Lista de Processamento'})]});}export default Uploader;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","Uploader","_ref","onProcess","isLoading","activeTab","setActiveTab","currentFiles","setCurrentFiles","links","setLinks","rawText","setRawText","handleFileChange","event","newFiles","Array","from","target","files","prevFiles","handleSubmit","payload","split","filter","link","trim","texts","text","renderTabContent","children","htmlFor","className","xmlns","fill","viewBox","stroke","strokeWidth","strokeLinecap","strokeLinejoin","d","type","id","name","multiple","onChange","length","onClick","map","f","i","concat","placeholder","value","e","disabled"],"sources":["C:/Users/mathe/Desktop/GeoPrumoPro/frontend/src/components/Upload/Uploader.jsx"],"sourcesContent":["// geoprumo/frontend/src/components/Upload/Uploader.jsx\r\n\r\nimport React, { useState } from 'react';\r\n\r\nfunction Uploader({ onProcess, isLoading }) {\r\n  const [activeTab, setActiveTab] = useState('files');\r\n  const [currentFiles, setCurrentFiles] = useState([]);\r\n  const [links, setLinks] = useState('');\r\n  const [rawText, setRawText] = useState('');\r\n\r\n  const handleFileChange = (event) => {\r\n    const newFiles = Array.from(event.target.files);\r\n    // CORREÇÃO: Adiciona os novos arquivos à lista existente, em vez de substituir.\r\n    setCurrentFiles(prevFiles => [...prevFiles, ...newFiles]);\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    const payload = {\r\n      files: currentFiles,\r\n      links: links.split('\\n').filter(link => link.trim() !== ''),\r\n      texts: [rawText].filter(text => text.trim() !== ''),\r\n    };\r\n    onProcess(payload);\r\n    // Limpa os campos para a próxima adição\r\n    setCurrentFiles([]);\r\n    setLinks('');\r\n    setRawText('');\r\n  };\r\n\r\n  const renderTabContent = () => {\r\n    switch (activeTab) {\r\n      case 'files':\r\n        return (\r\n          <div>\r\n            <label htmlFor=\"file-upload\" className=\"flex justify-center w-full h-32 px-4 transition bg-white border-2 border-gray-300 border-dashed rounded-md appearance-none cursor-pointer hover:border-gray-400 focus:outline-none\">\r\n              <span className=\"flex items-center space-x-2\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-6 h-6 text-gray-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"2\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M7 16a4 4 0 01-4-4V6a4 4 0 014-4h1.586a1 1 0 01.707.293l1.414 1.414a1 1 0 00.707.293H12a4 4 0 014 4v1.586a1 1 0 00.293.707l1.414 1.414a1 1 0 01.293.707V16a4 4 0 01-4 4H7z\" /></svg>\r\n                <span className=\"font-medium text-gray-600\">Arraste arquivos ou <span className=\"text-blue-600 underline\">procure</span></span>\r\n              </span>\r\n              <input type=\"file\" id=\"file-upload\" name=\"file-upload\" multiple className=\"hidden\" onChange={handleFileChange} />\r\n            </label>\r\n            {currentFiles.length > 0 && (\r\n              <div className=\"mt-2 text-sm text-gray-500\">\r\n                <div className='flex justify-between items-center'>\r\n                  <p className='font-semibold'>Arquivos selecionados:</p>\r\n                  <button onClick={() => setCurrentFiles([])} className='text-xs text-red-500 hover:underline'>Limpar seleção</button>\r\n                </div>\r\n                <ul className='list-disc pl-5 mt-1'>{currentFiles.map((f, i) => <li key={`${f.name}-${i}`}>{f.name}</li>)}</ul>\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n      case 'links':\r\n        return (<textarea className=\"w-full h-32 p-2 border rounded\" placeholder=\"Cole um ou mais links, um por linha...\" value={links} onChange={(e) => setLinks(e.target.value)} />);\r\n      case 'text':\r\n        return (<textarea className=\"w-full h-32 p-2 border rounded\" placeholder=\"Cole os dados da sua planilha aqui (formato CSV)...\" value={rawText} onChange={(e) => setRawText(e.target.value)} />);\r\n      default: return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"border-b border-gray-200 mb-4\">\r\n        <nav className=\"-mb-px flex space-x-4\" aria-label=\"Tabs\">\r\n          <button onClick={() => setActiveTab('files')} className={`${activeTab === 'files' ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'} whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}>Arquivos</button>\r\n          <button onClick={() => setActiveTab('links')} className={`${activeTab === 'links' ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'} whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}>Links</button>\r\n          <button onClick={() => setActiveTab('text')} className={`${activeTab === 'text' ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'} whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}>Colar Texto</button>\r\n        </nav>\r\n      </div>\r\n      \r\n      {renderTabContent()}\r\n\r\n      <button onClick={handleSubmit} disabled={isLoading || (currentFiles.length === 0 && links.trim() === '' && rawText.trim() === '')} className=\"mt-4 w-full bg-green-600 text-white font-bold py-2 px-4 rounded hover:bg-green-700 disabled:bg-gray-400 flex items-center justify-center\">\r\n        {isLoading ? 'Aguarde...' : 'Adicionar à Lista de Processamento'}\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Uploader;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}